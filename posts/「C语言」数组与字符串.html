<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Aoike青池</title>

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://aoike.azurice.com/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<!--<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>-->
<!--<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>-->
<!--<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>-->

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>

    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>

    <div class="main gt-bg-theme-color-first">

        <div class="post-container">
            <div class="post-detail gt-bg-theme-color-second">
                <article class="gt-post-content">
                    <h2 class="post-title">
                        「C语言」数组与字符串.md
                    </h2>
                    <div class="post-info">
                        <time class="post-time gt-c-content-color-first">
                            修改于 · 2021-10-28 01:04:11 · 发布于 · 2021-10-28 01:04:11
                        </time>
                    </div>
                    <div class="post-content">
                        <h2>「C语言」数组与字符串</h2>
<h3>一、数组</h3>
<blockquote>
<p><strong>数组</strong>，顾名思义。<strong>数</strong> 的 <strong>组</strong>，一坨数。</p>
</blockquote>
<p>一个某数据类型的数组可以存储多个该种数据类型的数据，下标从0开始。</p>
<img src="https://i.loli.net/2021/10/27/qLW34fmvpjgEJ6M.png" alt="「C语言」数组与字符串_数组" style="zoom:33%;" />
<blockquote>
<p>上图：普通 <code><span class="hljs-built_in">int</span></code> 变量、一维 <code><span class="hljs-built_in">int</span></code> 数组、二维 <code><span class="hljs-built_in">int</span></code> 数组......</p>
</blockquote>
<p>一些概念：</p>
<ul>
<li>
<p><strong>元素</strong> ：对于数组 <code><span class="hljs-selector-tag">a</span></code> ，<code><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[1]</span></code> 为数组的一个元素</p>
</li>
<li>
<p><strong>下标</strong> ：数学中 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>，这里为数组元素 <code><span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[i]</span></code> 的 <code><span class="hljs-selector-tag">i</span></code> 。</p>
</li>
</ul>
<h4>1.1 数组的声明</h4>
<pre><code class="hljs language-C">数据类型 数组变量名[数组长度];
</code></pre>
<img src="https://i.loli.net/2021/10/25/24fKIrC6bM8wNUY.png" alt="「C语言」数组与字符串_一维数组" style="zoom: 33%;" />
<pre><code class="hljs language-C"><span class="hljs-comment">// 声明一个长度为3的数组a</span>
<span class="hljs-keyword">int</span> a[<span class="hljs-number">3</span>];
<span class="hljs-comment">// 声明一个长度为3的数组b，并赋初值 a[0] = 0, a[1] = 1, a[2] = 2</span>
<span class="hljs-keyword">int</span> b[<span class="hljs-number">3</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>};
</code></pre>
<blockquote>
<p>当然初始化的时候也可以不输全：</p>
<pre><code class="hljs language-C"><span class="hljs-comment">// 声明一个长度为3的数组，并赋初值 a[0] = 0, a[1] = 1</span>
<span class="hljs-keyword">int</span> a[<span class="hljs-number">3</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>};
</code></pre>
<p>未被赋值的元素就像未被赋值的变量，也许是垃圾值</p>
</blockquote>
<blockquote>
<p>当想要声明的长度与初始化数据长度相同时，可以省略掉，让编译器自行推断。</p>
<pre><code class="hljs language-C"><span class="hljs-comment">// 声明一个数组，并赋初值 a[0] = 0, a[1] = 1, a[2] = 2，自动推断数组长度为3</span>
<span class="hljs-keyword">int</span> a[] = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>};
<span class="hljs-comment">// 相当于 int a[3] = {0, 1, 2};</span>
</code></pre>
</blockquote>
<h4>1.2 数组的使用</h4>
<p>数组的每一个元素相当于一个该类型的变量，数组的元素要使用 <code>数组名<span class="hljs-selector-attr">[]</span></code> 加下标来访问。</p>
<p>然后将其当成正常变量来用即可。</p>
<pre><code class="hljs language-C"><span class="hljs-keyword">int</span> a[<span class="hljs-number">3</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>};

<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[<span class="hljs-number">1</span>]); <span class="hljs-comment">// 输出1</span>

a[<span class="hljs-number">0</span>] = a[<span class="hljs-number">1</span>] + a[<span class="hljs-number">2</span>]; <span class="hljs-comment">// 执行完此句后 a[0] = 3, a[1] = 1, a[2] = 2</span>

<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[<span class="hljs-number">2</span>]); <span class="hljs-comment">// 读入一个整数存入a[2]</span>
</code></pre>
<h4>1.3 获取数组的长度</h4>
<p>这里介绍一个函数 <code><span class="hljs-function"><span class="hljs-title">sizeof</span><span class="hljs-params">()</span></span></code> ，可以获取参数所占内存大小（Byte字节数）：</p>
<ul>
<li>
<p><code><span class="hljs-function"><span class="hljs-title">sizeof</span><span class="hljs-params">(int)</span></span></code> 输出 <code><span class="hljs-built_in">int</span></code> 型变量所占字节数。</p>
<blockquote>
<p>在不同机器、不同编译器上，大小会有所不同。</p>
</blockquote>
</li>
<li>
<p><code><span class="hljs-function"><span class="hljs-title">sizeof</span><span class="hljs-params">(变量名)</span></span></code> 输出对应变量所占字节数。</p>
<blockquote>
<p><code><span class="hljs-function"><span class="hljs-title">sizeof</span><span class="hljs-params">(数组名)</span></span></code> 即可输出整个数组所占字节数。</p>
</blockquote>
</li>
</ul>
<p>一个某类型数组由多个该类型变量组成，那么我么可以得到数组的长度为：</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">sizeof</span>(数组名) / <span class="hljs-title">sizeof</span>(数组类型)</span>
</code></pre>
<p>例：</p>
<pre><code class="hljs language-C"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h></span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h></span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
	<span class="hljs-keyword">int</span> arr[] = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>};
	<span class="hljs-keyword">int</span> arr1[<span class="hljs-number">3</span>];
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-keyword">sizeof</span>(arr) / <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>));
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-keyword">sizeof</span>(arr1) / <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>));
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>输出：</p>
<pre><code class="hljs">3
3
</code></pre>
<h4>1.4 数组与地址(Lv1)</h4>
<blockquote>
<p>Lv2 或许大概可能会在下面的下面的很下面出现，因为与指针数组与指针的指针等花里胡哨的玩意儿相关。</p>
</blockquote>
<p>我们来看以下程序：</p>
<pre><code class="hljs language-C"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h></span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
	<span class="hljs-keyword">int</span> arr[<span class="hljs-number">3</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>};
	
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&amp;array[0]    = %p\n&quot;</span>, &amp;arr[<span class="hljs-number">0</span>]);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&amp;array[1]    = %p\n&quot;</span>, &amp;arr[<span class="hljs-number">1</span>]);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;array        = %p\n&quot;</span>, arr);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;array + 1    = %p\n&quot;</span>, arr + <span class="hljs-number">1</span>);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;*array       = %d\n&quot;</span>, *arr);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;*(array + 1) = %d\n&quot;</span>, *(arr + <span class="hljs-number">1</span>));
	
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<blockquote>
<p><code><span class="hljs-tag">%<span class="hljs-selector-tag">p</span></span></code> 是打印地址用的，按16进制输出，不够8位左边补零。（详见 <a href="">格式化输出</a> （你点啥，我还没写））</p>
</blockquote>
<p>输出为：</p>
<pre><code class="hljs">&amp;array[0]    = 0x7ffe9129e5bc
&amp;array[1]    = 0x7ffe9129e5c0<span class="hljs-built_in">
array </span>       = 0x7ffe9129e5bc<span class="hljs-built_in">
array </span>+ 1    = 0x7ffe9129e5c0
*array       = 0
*(array + 1) = 1
</code></pre>
<p>看起来很乱，梳理一下:</p>
<ul>
<li>直接使用数组名，为一个 <strong>指向数组首元素的指针</strong>（存储了数组首元素地址的指针）.
<blockquote>
<p><code>指针 + 1</code> 会得到指向内存中紧接着的下一个变量的指针，对于数组来说，若 <code><span class="hljs-attribute">arr</span></code> 指针指向 <code><span class="hljs-attribute">arr</span>[<span class="hljs-number">0</span>]</code>，那么 <code><span class="hljs-attribute">arr</span> + <span class="hljs-number">1</span></code> 则指向 <code><span class="hljs-attribute">arr</span>[<span class="hljs-number">1</span>]</code>。</p>
</blockquote>
</li>
<li>使用取址运算符 <code><span class="hljs-meta">&amp;</span></code> 加数组元素，为 <strong>对应元素的地址</strong>。</li>
</ul>
<p>这二者区别在于：前者为指针可以用 <code><span class="hljs-comment">*arr</span></code>, <code><span class="hljs-comment">*(arr +1)</span></code> 操作，而后者为地址不能用 <code>*(<span class="hljs-meta">&amp;arr[0])</span></code>, <code>*(<span class="hljs-meta">&amp;arr[1])</span></code> 操作。</p>
<h3>二、字符串 —— 字符数组</h3>
<blockquote>
<p><strong>字符串</strong>，还是顾名思义。<strong>字符</strong> 的 <strong>串</strong>。</p>
</blockquote>
<p>我们其实已经使用字符串很久了：<code><span class="hljs-function"><span class="hljs-title">printf</span><span class="hljs-params">(<span class="hljs-string">&quot;nb&quot;</span>)</span></span></code>，<code><span class="hljs-function"><span class="hljs-title">puts</span><span class="hljs-params">(<span class="hljs-string">&quot;PengGeNiuBi&quot;</span>)</span></span></code>，参数中用 <code><span class="hljs-string">&quot;&quot;</span></code> 包起来的内容即为字符串型数据。</p>
<p><s>正如字符是字符，字符串是字符串</s> 字符的字面值常量使用 <code>&#x27;&#x27;</code> 括起来，而字符串的字面值常量使用 <code><span class="hljs-string">&quot;&quot;</span></code> 括起来。</p>
<blockquote>
<p>在 C++ 中有专门的 <code><span class="hljs-built_in">string</span></code> 类型，而 C 中字符串为字符数组。</p>
</blockquote>
<p>这是一个长度为6的字符数组：</p>
<pre><code class="hljs language-C"><span class="hljs-keyword">char</span> str[<span class="hljs-number">6</span>];
</code></pre>
<p>我们可以使用 <code>scanf</code> 来读入一个字符串存入其中，字符串的格式符为 <code><span class="hljs-tag">%<span class="hljs-selector-tag">s</span></span></code> （ <code><span class="hljs-attribute">s</span></code> 代表 <code><span class="hljs-built_in">string</span></code> ），传入的地址为开始存储字符串的地址（用来存储字符串首字符的地址）：</p>
<pre><code class="hljs">scanf(<span class="hljs-string">&quot;%s&quot;</span>, <span class="hljs-symbol">&amp;str</span>[<span class="hljs-number">0</span>])<span class="hljs-comment">;</span>
</code></pre>
<blockquote>
<p>由 1.4，对于从下标0开始存储字符串的需求，下面的写法也可：</p>
<pre><code class="hljs"><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, str);
</code></pre>
</blockquote>
<p>输入 <code><span class="hljs-attribute">Hello</span></code> 。</p>
<p>使用 <code>printf</code> 输出字符串：</p>
<pre><code class="hljs"><span class="hljs-keyword">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, str);
</code></pre>
<p>当然还有一个专门用来输出字符串的函数（末尾会自带换行）：<code><span class="hljs-function"><span class="hljs-title">puts</span><span class="hljs-params">()</span></span></code></p>
<pre><code class="hljs">puts(str)<span class="hljs-comment">;</span>
</code></pre>
<h4>2.1 字符串是怎么存到字符数组中的？</h4>
<p>上例中的 <code><span class="hljs-attribute">Hello</span></code> 存储到 <code><span class="hljs-attribute">str</span>[<span class="hljs-number">6</span>]</code> 中，如果我们遍历数组，打印出每一个元素：</p>
<pre><code class="hljs language-c"><span class="hljs-keyword">int</span> i;
<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++) {
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;str[%d]: %c (%d)\n&quot;</span>, i, str[i], str[i]);
}
</code></pre>
<p>输出为：</p>
<pre><code class="hljs"><span class="hljs-attribute">str</span>[<span class="hljs-number">0</span>]: H (<span class="hljs-number">72</span>)
<span class="hljs-attribute">str</span>[<span class="hljs-number">1</span>]: e (<span class="hljs-number">101</span>)
<span class="hljs-attribute">str</span>[<span class="hljs-number">2</span>]: l (<span class="hljs-number">108</span>)
<span class="hljs-attribute">str</span>[<span class="hljs-number">3</span>]: l (<span class="hljs-number">108</span>)
<span class="hljs-attribute">str</span>[<span class="hljs-number">4</span>]: o (<span class="hljs-number">111</span>)
<span class="hljs-attribute">str</span>[<span class="hljs-number">5</span>]:   (<span class="hljs-number">0</span>)
</code></pre>
<p><code><span class="hljs-attribute">str</span>[<span class="hljs-number">5</span>]</code> 看起来是空的（确实），不过也存了一个ASCII码值为0的字符（空字符），也就是 <code>&#x27;\0&#x27;</code> 。（如下图）</p>
<p><img src="https://i.loli.net/2021/10/25/xLH4vP8TZwDJYXF.png" alt="「C语言」数组与字符串_字符串"></p>
<p>这被用来标记字符串的结束，<code>scanf</code> 读入后会自动向输入的字符后添加一个 <code>&#x27;\0&#x27;</code> ，<code>printf</code> 输出时遇到 <code>&#x27;\0&#x27;</code> 也会停止。</p>
<blockquote>
<p>正是因为这个 <code>&#x27;\0&#x27;</code> 的存在，<code>printf</code> 才可以在输出字符串时使用字符数组中的元素下标到哪停止。</p>
</blockquote>
<p>如果我们手动将 <code><span class="hljs-attribute">str</span>[<span class="hljs-number">2</span>]</code> 的值改为 <code><span class="hljs-string">\0</span></code> ，再用 <code>printf</code> 输出，则会输出 <code><span class="hljs-attribute">He</span></code> 。</p>

                    </div>
                </article>
            </div>

        </div>
    </div>
</body>
</html>
